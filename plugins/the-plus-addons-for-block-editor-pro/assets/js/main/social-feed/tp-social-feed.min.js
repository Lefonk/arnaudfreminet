document.addEventListener("DOMContentLoaded",()=>{let a=document.querySelectorAll(".tpgb-social-feed");a&&a.forEach(a=>{function b(c){var d=c.target;if(d.classList.contains("readbtn")&&d.closest(".tpgb-social-feed")){let b=d.closest(".tpgb-social-feed"),c=d.getAttribute("aria-label");var f=d.closest(".tpgb-message"),g=f.closest(".tpgb-isotope .post-loop-inner"),h=e,i=f.querySelector(".showtext");if(f.classList.contains("show-text"))f.classList.remove("show-text","show-less"),d.innerHTML=c,f.querySelector(".sf-dots").style.display="inline",!0===h.ScrollOn&&!0===h.TextLimit&&(i.classList.remove(h.className),i.removeAttribute("style"));else{f.classList.add("show-text","show-less"),d.innerHTML="Show Less",f.querySelector(".sf-dots").style.display="none";var j=a.querySelectorAll(".showtext");!0===h.ScrollOn&&!0===h.TextLimit&&j&&j.forEach(function(a){a.clientHeight>=h.Height&&(i.classList.add(h.className),i.style.height=h.Height+"px")})}if(g){var k=new Isotope(g,{itemSelector:".grid-item",resizable:!0,sortBy:"original-order"});k.layout()}}if(d.classList.contains("readbtn")&&d.closest(".fancybox-si")){let a=d.closest(".tpgb-message"),b=e,c=d.closest(".tpgb-message");a.classList.contains("show-text")?(a.classList.remove("show-text","show-less"),d.innerHTML="Show More",a.querySelector(".sf-dots").style.display="inline","true"===b.FancyScroll&&"true"===b.TextLimit&&(c.classList.remove(b.Fancyclass),c.removeAttribute("style"))):(a.classList.add("show-text","show-less"),d.innerHTML="Show Less",a.querySelector(".sf-dots").style.display="none","true"===b.FancyScroll&&"true"===b.TextLimit&&Array.from(c).forEach(function(a){a.clientHeight>=b.FancyHeight&&(a.classList.add(b.Fancyclass),a.style.height=b.FancyHeight+"px")}))}this.removeEventListener("click",a=>{b(a)})}let c=a.getAttribute("data-id"),d=a.getAttribute("data-fancy-option")?JSON.parse(a.getAttribute("data-fancy-option")):"",e=a.getAttribute("data-scroll-normal")?JSON.parse(a.getAttribute("data-scroll-normal")):"";jQuery("[data-fancybox=\""+c+"\"]",this).fancybox({buttons:d.button,image:{preload:0},loop:d.loop,infobar:d.infobar,animationEffect:d.animationEffect,animationDuration:d.animationDuration,transitionEffect:d.transitionEffect,transitionDuration:d.transitionDuration,arrows:d.arrows,clickContent:d.clickContent,clickSlide:d.slideclick,dblclickContent:!1,dblclickSlide:!1,smallBtn:!1,iframe:{preload:0},youtube:{autoplay:0},vimeo:{autoplay:0},mp4:{autoplay:0},video:{autoStart:0}});let f=a.querySelectorAll(".grid-item.feed-Facebook");if(f&&f.forEach(a=>{let b=a.getAttribute("data-index");jQuery("[data-fancybox=\"album-"+b+"-"+c+"\"]",this).fancybox({buttons:d.button,image:{preload:!0},loop:d.loop,infobar:d.infobar,animationEffect:d.animationEffect,animationDuration:d.animationDuration,transitionEffect:d.transitionEffect,transitionDuration:d.transitionDuration,arrows:d.arrows,clickContent:d.clickContent,clickSlide:d.slideclick,dblclickContent:!1,dblclickSlide:!1})}),e&&!0===e.ScrollOn&&!1===e.TextLimit){let b=a.querySelectorAll(".tpgb-message");b&&b.forEach(function(a){a.clientHeight>=e.Height&&(a.classList.add(e.className),a.style.height=e.Height+"px")})}if(!0===e.FancyScroll&&!1===e.TextLimit){let b=a.querySelectorAll(".fancybox-si .tpgb-message");b.forEach(function(a){a.classList.add(e.Fancyclass),a.style.height=e.FancyHeight+"px"})}document.addEventListener("click",function(a){b(a)});let g=a.querySelector(".feed-load-more");g&&g.addEventListener("click",function(b){b.preventDefault();let c=g.getAttribute("data-loadattr"),d=g.getAttribute("data-display"),e=g.getAttribute("data-loadview"),f=g.getAttribute("data-loadclass"),h=g.getAttribute("data-layout"),i=g.getAttribute("data-loadingtxt"),j=g.textContent,k=b.currentTarget.closest(".tpgb-block-"+f);g.dataset.requestRunning&&"true"==g.dataset.requestRunning||(g.dataset.requestRunning="true",g.textContent=i,fetch(tpgb_load.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"action=tpgb_feed_load&view="+d+"&loadFview="+e+"&loadattr="+c}).then(function(a){return a.json()}).then(function(b){var c=b&&b.HTMLContent?b.HTMLContent:"",f=b&&b.totalFeed?b.totalFeed:"",i=b&&b.FilterStyle?b.FilterStyle:"",l=b&&b.allposttext?b.allposttext:"";if(""==b)g.classList.add("hide");else{var m=k.querySelector(".all .tpgb-category-count"),n=k.querySelector(".post-loop-inner");n.insertAdjacentHTML("beforeend",c);var o=k.querySelectorAll(".grid-item").length;if(m&&(m.innerHTML="",m.insertAdjacentHTML("beforeend",o)),"style-2"==i||"style-3"==i){var p=a.querySelectorAll(".tpgb-filter-list .tpgb-category-list:not(.all)");p&&p.forEach(function(a){var b=a.querySelector("span:nth-child(2)").dataset.hover,c=k.querySelectorAll(".grid-item."+b).length;a.querySelector("span:nth-child(1).tpgb-category-count").innerHTML="",a.querySelector("span:nth-child(1).tpgb-category-count").insertAdjacentHTML("beforeend",c)})}("grid"==h||"masonry"==h)&&a.classList.contains("tpgb-isotope")&&jQuery(n).isotope("layout").isotope("reloadItems"),o>=f?(g.classList.add("hide"),g.parentNode.insertAdjacentHTML("beforeend","<div class=\"tpgb-feed-loaded\">"+l+"</div>")):g.textContent=j}d=+d+ +e,g.setAttribute("data-display",d)}).finally(function(){if(g.dataset.requestRunning="false",("grid"==h||"masonry"==h)&&a.classList.contains("tpgb-isotope")&&setTimeout(function(){var b=a.querySelector(".post-loop-inner");jQuery(b).isotope({itemSelector:".grid-item",resizable:!0,sortBy:"original-order"})},100),k.classList.contains("tpgb-isotope")&&("grid"==h||"masonry"==h)){var b=k.querySelectorAll(".tpgb-carousel:not(.is-initialized)");b.forEach(function(a){"function"==typeof splide_init&&splide_init(a)})}}))});let h=a.querySelector(".tpgb-feed-lazy-load");if(h&&a.classList.contains("tpgb-isotope")){var i,j,k,l,m,n,o=window,p=function(){i=o.innerWidth,j=o.innerHeight,k=document.querySelector("body").offsetHeight,m=a.offsetHeight,n=a.offsetTop+50,setTimeout(function(){m=a.offsetHeight,n=a.offsetTop+50},50)};p(),o.addEventListener("resize",p),o.addEventListener("scroll",function(b){if(b.preventDefault(),p(),l=o.pageYOffset,m=a.offsetHeight,n=a.offsetTop+50,a.querySelector(".tpgb-feed-lazy-load")&&l<k&&l+60>m+n-j){let a=h.querySelector(".feed-lazy-load"),b=a.dataset.lazyattr,c=a.dataset.totalfeed,d=a.getAttribute("data-display"),e=a.dataset.lazyview,f=a.dataset.lazyclass,g=a.dataset.lazylayout,i=a.innerHTML,j=a.closest(".tpgb-block-"+f);if(a.dataset.requestRunning&&"true"==a.dataset.requestRunning)return;a.dataset.requestRunning="true",+c>=+d&&fetch(tpgb_load.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"action=tpgb_feed_load&view="+d+"&loadFview="+e+"&loadattr="+b}).then(function(a){return a.json()}).then(function(b){var c=b&&b.HTMLContent?b.HTMLContent:"",f=b&&b.totalFeed?b.totalFeed:"",h=b&&b.FilterStyle?b.FilterStyle:"",k=b&&b.allposttext?b.allposttext:"";if(""===b)a.classList.add("hide");else{var l=j.querySelector(".all .tpgb-category-count"),m=j.querySelector(".post-loop-inner");m.insertAdjacentHTML("beforeend",c);var n=j.querySelectorAll(".grid-item").length;if(l&&(l.innerHTML="",l.appendChild(document.createTextNode(n))),"style-2"===h||"style-3"===h){var o=j.querySelectorAll(".tpgb-filter-list .tpgb-category-list:not(.all)");o&&o.forEach(function(a){var b=a.querySelector("span:nth-child(2)").dataset.hover,c=j.querySelectorAll(".grid-item."+b).length;a.querySelector("span:nth-child(1).tpgb-category-count").innerHTML="",a.querySelector("span:nth-child(1).tpgb-category-count").appendChild(document.createTextNode(c))})}if(("grid"===g||"masonry"===g)&&j.classList.contains("tpgb-isotope")&&jQuery(m).isotope("layout").isotope("reloadItems"),!(n>=+f))a.innerHTML=i;else if(!a.nextElementSibling||!a.nextElementSibling.classList.contains("tpgb-feed-loaded")){a.classList.add("hide");var p=document.createElement("div");p.classList.add("tpgb-feed-loaded"),p.innerHTML=k,a.parentNode.appendChild(p)}}d=+d+ +e,a.setAttribute("data-display",d)}).finally(function(){a.dataset.requestRunning="false"}).then(function(){if(j.classList.contains("tpgb-isotope")){if("grid"===g||"masonry"===g){var a=j.querySelector(" .post-loop-inner");setTimeout(()=>{jQuery(a).isotope({itemSelector:".grid-item",resizable:!0,sortBy:"original-order"})},100)}var b=j.querySelectorAll(".tpgb-carousel:not(.is-initialized)");b.forEach(function(a){"function"==typeof splide_init&&splide_init(a)})}})}})}})});