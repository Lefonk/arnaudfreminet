"use strict";var loopTime,updatedtime="",allCount=document.querySelectorAll(".tp-countdown");function WidgetCountDownHandler(s){var e=document.querySelectorAll("."+s+".tp-countdown");function t(){e.forEach(e=>{var t,o,a,n,l,r=e.querySelector(".tpgb-countdown-counter");r&&(t=r.dataset.time,o=e.dataset.offset,a=e.dataset.day,n=e.dataset.hour,l=e.dataset.min,r=e.dataset.sec,t&&""!=t&&jQuery(e).downCount({date:t,offset:o,text_day:a,text_hour:n,text_minute:l,text_second:r},function(){countdownExpiry(s)}))})}0<e.length&&(t(),e.forEach(e=>{e.addEventListener("change",function(){t()})}))}function styleFlipdown(e){var t=document.querySelector("."+e+" .flipdown").dataset.time,o=document.querySelector("."+e),a=o.dataset.offset,n=o.dataset.day,l=o.dataset.hour,r=o.dataset.min,s=o.dataset.sec,o=o.dataset.filptheme,n=null!=n?n:"",l=null!=l?l:"",r=null!=r?r:"",s=null!=s?s:"";null!=t&&(t-=3600*a,new FlipDown(t,e,{theme:o,headings:[n,l,r,s]}).start().ifEnded(function(){countdownExpiry(e)}))}function styleProgressbar(l){var r,s,c,i,p,d,u,m,y,g,e=document.getElementById("s"+l),t=document.getElementById("m"+l),o=document.getElementById("h"+l),a=document.getElementById("d"+l),n={duration:200,color:"#000000",trailColor:"#ddd",strokeWidth:5,trailWidth:3};null!=e&&(r=new ProgressBar.Circle(e,n),s=new ProgressBar.Circle(t,n),c=new ProgressBar.Circle(o,n),i=new ProgressBar.Circle(a,n),n=document.querySelector("."+l),p=n.querySelector(".tpgb-countdown-counter").dataset.time,d=n.dataset.day,u=n.dataset.hour,m=n.dataset.min,y=n.dataset.sec,d=null!=d?d:"",u=null!=u?u:"",m=null!=m?m:"",y=null!=y?y:"",g=setInterval(function(){var e=new Date,e=new Date(p)-e,t=Math.floor(e/864e5*1);i.animate(t/(t+5),function(){i.setText('<span class="number">'+t+'</span><span class="label">'+d+"</span>")});var o=Math.floor(e%864e5/36e5*1);c.animate(o/24,function(){c.setText('<span class="number">'+o+'</span><span class="label">'+u+"</span>")});var a=Math.floor(e%864e5%36e5/6e4*1);s.animate(a/60,function(){s.setText('<span class="number">'+a+'</span><span class="label">'+m+"</span>")});var n=Math.floor(e%864e5%36e5%6e4/1e3*1);r.animate(n/60,function(){r.setText('<span class="number">'+n+'</span><span class="label">'+y+"</span>")}),t+o+a+n==0&&(countdownExpiry(l),clearInterval(g))},1e3))}function tpgb_scarcity_1(n){var l,r,s,c,i,e=document.querySelectorAll("."+n+".tp-countdown");0<e.length&&(l=e[0],r=JSON.parse(l.dataset.countdata),e=l.querySelectorAll(".tpgb-countdown-counter"),s=(new Date).getTime()+6e4*r.sctimeli,r&&r.storetype&&"cookie"==r.storetype&&(c="tpgb-"+r.type+"-"+r.style+"-"+n+"-"+r.sctimeli),0<e.length&&("cookie"==r.storetype?(localStorage.getItem(c)||localStorage.setItem(c,+new Date(s)),updatedtime=+localStorage.getItem(c),loopTime=updatedtime+6e4*r.delayminit,i=l.s1Interval=setInterval(function(){var e,t,o,a;0<Math.floor((updatedtime-new Date)/6e4)+1?(o=new Date,a=updatedtime-o,e=Math.floor(a/864e5),t=Math.floor(a%864e5/36e5),o=Math.floor(a%36e5/6e4),a=Math.floor(a%6e4/1e3),0<l.querySelectorAll(".days").length&&(l.querySelector(".days").innerHTML=e),0<l.querySelectorAll(".hours").length&&(l.querySelector(".hours").innerHTML=t),0<l.querySelectorAll(".minutes").length&&(l.querySelector(".minutes").innerHTML=o),0<l.querySelectorAll(".seconds").length&&(l.querySelector(".seconds").innerHTML=a)):(countdownExpiry(n,c),"no"==r.fakeloop&&clearInterval(i))},1e3)):"normal"==r.storetype&&(i=setInterval(function(){var e=+new Date(s)-new Date,t=Math.floor(e/864e5),o=Math.floor(e%864e5/36e5),a=Math.floor(e%36e5/6e4),e=Math.floor(e%6e4/1e3);0<=t+o+a+e?(0<l.querySelectorAll(".days").length&&(l.querySelector(".days").innerHTML=t),0<l.querySelectorAll(".hours").length&&(l.querySelector(".hours").innerHTML=o),0<l.querySelectorAll(".minutes").length&&(l.querySelector(".minutes").innerHTML=a),0<l.querySelectorAll(".seconds").length&&(l.querySelector(".seconds").innerHTML=e)):clearInterval(i)},1e3))))}function tpgb_scarcity_2(e){var t,o,a,n,l,r,s,c,i,p,d=document.querySelector("."+e);d&&(t=JSON.parse(d.dataset.countdata),document.querySelector("."+e+" .flipdown"),s=d.dataset.day,c=d.dataset.hour,i=d.dataset.min,p=d.dataset.sec,o=d.dataset.filptheme,a="tpgb-"+t.type+"-"+t.style+"-"+e+"-"+t.sctimeli,s=null!=s?s:"",c=null!=c?c:"",i=null!=i?i:"",p=null!=p?p:"",d.classList.contains("countdown-style-2")&&(d.insertAdjacentHTML("afterbegin","<div id ="+e+' class="flipdown tpgb-countdown-counter"></div>'),"cookie"==t.storetype?(n=(new Date).getTime()+6e4*t.sctimeli,localStorage.getItem(a)||localStorage.setItem(a,+new Date(n)),l=+localStorage.getItem(a),r=new Date(l).getTime()/1e3,d=Math.floor((l-new Date)/6e4),loopTime=l+t.delayminit*Number(6e4),0<=d?new FlipDown(r,e,{theme:o,headings:[s,c,i,p]}).start().ifEnded(function(){countdownExpiry(e,a)}):countdownExpiry(e,a)):"normal"==t.storetype&&(n=(new Date).getTime()+6e4*t.sctimeli,l=+new Date(n),r=new Date(l).getTime()/1e3,new FlipDown(r,e,{theme:o,headings:[s,c,i,p]}).start().ifEnded(function(){}))))}function tpgb_scarcity_3(l){var e,r,t,o,a,n,s,c,i,p,d,u,m,y,g,f,b,h,w=document.querySelector("."+l+".countdown-style-3");w&&(e=JSON.parse(w.dataset.countdata),r="tpgb-"+e.type+"-"+e.style+"-"+l+"-"+e.sctimeli,t=(new Date).getTime()+6e4*e.sctimeli,tpgb_progressbar_sethtml(l,w),o=document.getElementById("s"+l),a=document.getElementById("m"+l),n=document.getElementById("h"+l),s=document.getElementById("d"+l),w={duration:200,color:"#000000",trailColor:"#ddd",strokeWidth:5,trailWidth:3},c=new ProgressBar.Circle(o,w),i=new ProgressBar.Circle(a,w),p=new ProgressBar.Circle(n,w),d=new ProgressBar.Circle(s,w),w=document.querySelector("."+l),g=w.dataset.day,f=w.dataset.hour,b=w.dataset.min,h=w.dataset.sec,g=null!=g?g:"",f=null!=f?f:"",b=null!=b?b:"",h=null!=h?h:"","cookie"==e.storetype?(localStorage.getItem(r)||localStorage.setItem(r,+new Date(t)),o&&(u=+localStorage.getItem(r),w=Math.floor((u-new Date)/6e4),loopTime=u+6e4*e.delayminit,m=new Date(u).getTime(),0<w+1?y=setInterval(function(){var e=new Date,e=new Date(m)-e,t=Math.floor(e/864e5*1);d.animate(t/(t+5),function(){d.setText('<span class = "number">'+t+'</span><span class="label">'+g+"</span>")});var o=Math.floor(e%864e5/36e5*1);p.animate(o/24,function(){p.setText('<span class="number">'+o+'</span><span class="label">'+f+"</span>")});var a=Math.floor(e%864e5%36e5/6e4*1);i.animate(a/60,function(){i.setText('<span class = "number">'+a+'</span><span class = "label">'+b+"</span>")});var n=Math.floor(e%864e5%36e5%6e4/1e3*1);c.animate(n/60,function(){c.setText('<span class = "number">'+n+'</span><span class = "label">'+h+"</span>")}),t+o+a+n==0&&(countdownExpiry(l),clearInterval(y))},1e3):countdownExpiry(l,r))):"normal"==e.storetype&&null!=o&&(u=+new Date(t),m=new Date(u).getTime(),y=setInterval(function(){var e=new Date,e=new Date(m)-e,t=Math.floor(e/864e5*1);d.animate(t/(t+5),function(){d.setText('<span class = "number">'+t+'</span><span class="label">'+g+"</span>")});var o=Math.floor(e%864e5/36e5*1);p.animate(o/24,function(){p.setText('<span class="number">'+o+'</span><span class="label">'+f+"</span>")});var a=Math.floor(e%864e5%36e5/6e4*1);i.animate(a/60,function(){i.setText('<span class = "number">'+a+'</span><span class = "label">'+b+"</span>")});var n=Math.floor(e%864e5%36e5%6e4/1e3*1);c.animate(n/60,function(){c.setText('<span class = "number">'+n+'</span><span class = "label">'+h+"</span>")}),t+o+a+n==0&&(countdownExpiry(l,r),clearInterval(y))},1e3)))}function tpgb_fakenumber_countdown(e){let t=document.querySelector("."+e),a=JSON.parse(t.getAttribute("data-countdata"));var n;a&&a.storetype&&"cookie"===a.storetype&&(n="tpgb-"+a.type+"-"+e+"-"+a.initNum);let l,r=t.querySelector(".tpgb-number-count"),s=a.initNum,c=a.endNum,i=a.numRange,p=a.changeInterval,d=(a.fenaLoop,a.massage);if(r.innerHTML="",r.innerHTML='<span class="tpgb-fake-text">'+d.replace("{visible_counter}",'<span class="tpgb-fake-visiblecounter">'+s+"</span>")+"</span>",Number(s)>=Number(c)){let t,o;"normal"==a.storetype?t=s:"cookie"==a.storetype&&(localStorage.getItem(n)||tpgb_fakereset(n,s)),l=setInterval(function(){var e=1<Number(i)?Math.round(Math.random()*Number(i)):Number(1);"normal"==a.storetype?o=s-=e:"cookie"==a.storetype&&(o=s=localStorage.getItem(n)-e,tpgb_fakereset(n,s)),Number(o)>=Number(c)?tpgb_fake_addtext(d,o,r):a.fenaLoop&&"yes"==a.fenaLoop?"normal"==a.storetype?s=t:"cookie"==a.storetype&&tpgb_fakereset(n,s):clearInterval(l)},1e3*p)}if(s<=c){let t,o;("normal"==a.storetype||"cookie"==a.storetype)&&(t=s),l=setInterval(function(){var e=1<Number(i)?Math.round(Math.random()*i):Number(1);"normal"==a.storetype?o=s=Number(s)+Number(e):"cookie"==a.storetype&&(o=s=Number(localStorage.getItem(n))+Number(e),tpgb_fakereset(n,s)),Number(o)<=Number(c)?tpgb_fake_addtext(d,o,r):a.fenaLoop&&"yes"==a.fenaLoop?"normal"==a.storetype?s=t:"cookie"==a.storetype&&tpgb_fakereset(n,t):clearInterval(l)},1e3*p)}}function tpgb_fakereset(e,t){localStorage.setItem(e,t)}function tpgb_fake_addtext(e,t,o){e='<span class="tpgb-fake-text">'+e.replace("{visible_counter}",'<span class="tpgb-fake-visiblecounter">'+Math.floor(t)+"</span>")+"</span>";o.innerText="",e?o.insertAdjacentHTML("afterbegin",e):o.insertAdjacentHTML("afterbegin",Math.floor(t))}function countdownExpiry(o,a){var n=document.querySelector("."+o+".tp-countdown"),l=JSON.parse(n.getAttribute("data-countdata"));if(l.fakeloop&&"yes"==l.fakeloop&&"none"==l.expiry&&"scarcity"==l.type)if("style-1"==l.style){var r=Math.floor((loopTime-new Date)/6e4),s=(new Date).getTime()+6e4*l.sctimeli;r<0&&(localStorage.removeItem(a),updatedtime=localStorage.setItem(a,+new Date(s)),tpgb_scarcity_1(o))}else if("style-2"==l.style){let t=setInterval(function(){var e=Math.floor((loopTime-new Date)/6e4);n.innerHTML="",e<0&&(localStorage.removeItem(a),clearInterval(t),tpgb_scarcity_2(o))},1e3)}else if("style-3"==l.style){let t=setInterval(function(){var e=Math.floor((loopTime-new Date)/6e4);n.innerHTML="",e<0&&(localStorage.removeItem(a),clearInterval(t),tpgb_scarcity_3(o))},1e3)}if("none"!=l.expiry){var e=l?l.expiry:"",r=Math.floor((loopTime-new Date)/6e4),s=(new Date).getTime()+6e4*l.sctimeli;if("redirect"==e)if("scarcity"==l.type){if("style-1"==l.style)l.fakeloop&&"yes"==l.fakeloop&&r<0?(localStorage.removeItem(a),updatedtime=localStorage.setItem(a+new Date(s)),tpgb_scarcity_1(o)):window.location.href=decodeURIComponent(l.redirect);else if("style-2"==l.style)if(l.fakeloop&&"yes"==l.fakeloop){let e=setInterval(function(){Math.floor((loopTime-new Date)/6e4)<0?(localStorage.removeItem(a),clearInterval(e),tpgb_scarcity_2(o)):window.location.href=decodeURIComponent(l.redirect)},1e3)}else window.location.href=decodeURIComponent(l.redirect);else if("style-3"==l.style){let e=n.querySelectorAll(".tpgb-countdown-counter");if(0<e.length&&e[0].remove(),l.fakeloop&&"yes"==l.fakeloop){let e=setInterval(function(){Math.floor((loopTime-new Date)/6e4)<0?(localStorage.removeItem(a),clearInterval(e),tpgb_scarcity_3(o)):window.location.href=decodeURIComponent(l.redirect)},1e3)}else window.location.href=decodeURIComponent(l.redirect)}}else"normal"==l.type&&(window.location.href=decodeURIComponent(l.redirect));else if("showmsg"==e)if("scarcity"==l.type){if("style-1"==l.style){let e=n.querySelectorAll(".tpgb-countdown-expiry"),t=n.querySelectorAll(".tpgb-countdown-counter");r<0?(localStorage.removeItem(a),updatedtime=localStorage.setItem(a,+new Date(s)),0<e.length&&e[0].remove(),t[0].style.display="block",tpgb_scarcity_1(o)):0==e.length&&(t[0].style.display="none",n.insertAdjacentHTML("afterbegin",'<div class="tpgb-countdown-expiry">'+l.expiryMsg+"</div>"))}else if("style-2"==l.style)if(l.fakeloop&&"yes"==l.fakeloop){let t=setInterval(function(){var e=Math.floor((loopTime-new Date)/6e4);n.innerHTML="",e<0?(localStorage.removeItem(a),clearInterval(t),tpgb_scarcity_2(o)):n.innerHTML='<div class="tpgb-countdown-expiry">'+l.expiryMsg+"</div>"},1e3)}else n.innerHTML="",n.innerHTML='<div class="tpgb-countdown-expiry">'+l.expiryMsg+"</div>";else if("style-3"==l.style)if(l.fakeloop&&"yes"==l.fakeloop){let e=setInterval(function(){Math.floor((loopTime-new Date)/6e4)<0?(localStorage.removeItem(a),n.innerHTML="",clearInterval(e),tpgb_scarcity_3(o)):(n.innerHTML="",n.innerHTML='<div class="tpgb-countdown-expiry">'+l.expiryMsg+"</div>")},1e3)}else n.innerHTML="",n.innerHTML='<div class="tpgb-countdown-expiry">'+l.expiryMsg+"</div>"}else"normal"==l.type&&(n.innerHTML="",n.innerHTML='<div class="tpgb-countdown-expiry">'+l.expiryMsg+"</div>");else if("showtemp"==l.expiry){let t=n.querySelectorAll(".tpgb-countdown-expiry");if("scarcity"==l.type){if("style-1"==l.style){let e=n.querySelectorAll(".tpgb-countdown-counter");r<0?(localStorage.removeItem(a),updatedtime=localStorage.setItem(a,+new Date(s)),0<e.length&&e[0].classList.contains("tpgb-hide")&&e[0].classList.remove("tpgb-hide"),0<t.length&&t[0].classList.add("tpgb-hide"),tpgb_scarcity_1(o)):(e[0].classList.add("tpgb-hide"),0<t.length&&t[0].classList.contains("tpgb-hide")&&t[0].classList.remove("tpgb-hide"),tpgb_resize_ele())}else if("style-2"==l.style){let e=n.querySelectorAll(".flipdown.tpgb-countdown-counter");if(0<e.length&&e[0].remove(),t&&t[0]&&t[0].classList.contains("tpgb-hide")&&(t[0].classList.remove("tpgb-hide"),t[0].classList.add("tpgb-show"),tpgb_resize_ele()),l.fakeloop&&"yes"==l.fakeloop){let e=setInterval(function(){Math.floor((loopTime-new Date)/6e4)<0&&(localStorage.removeItem(a),t&&t[0]&&t[0].classList.contains("tpgb-show")&&t[0].classList.remove("tpgb-show"),t&&t[0]&&!t[0].classList.contains("tpgb-hide")&&t[0].classList.add("tpgb-hide"),clearInterval(e),tpgb_scarcity_2(o))},1e3)}}else if("style-3"==l.style){let e=n.querySelectorAll(".tpgb-countdown-counter");if(0<e.length&&e[0].remove(),t[0].classList.contains("tpgb-hide")&&(t[0].classList.remove("tpgb-hide"),t[0].classList.add("tpgb-show"),tpgb_resize_ele()),l.fakeloop&&"yes"==l.fakeloop){let e=setInterval(function(){Math.floor((loopTime-new Date)/6e4)<0&&(localStorage.removeItem(a),t[0].classList.contains("tpgb-show")&&t[0].classList.remove("tpgb-show"),t[0].classList.contains("tpgb-hide")||t[0].classList.add("tpgb-hide"),clearInterval(e),tpgb_scarcity_3(o))},1e3)}}}else if("normal"==l.type){let e=n.querySelectorAll(".tpgb-countdown-expiry"),t=n.querySelectorAll(".tpgb-countdown-counter");0<t.length&&t[0].remove(),e[0].classList.contains("tpgb-hide")&&(e[0].classList.remove("tpgb-hide"),e[0].classList.add("tpgb-show"),tpgb_resize_ele())}}}}function tpgb_progressbar_sethtml(e,t){e&&(e='<div class="tpgb-countdown-counter"><div class="counter-part" id="d'+e+'"></div><div class="counter-part" id="h'+e+'"></div><div class="counter-part" id="m'+e+'"></div><div class="counter-part" id="s'+e+'"></div></div>',t.insertAdjacentHTML("afterbegin",e))}function tpgb_resize_ele(){let e=document.querySelectorAll(".tpgb-isotope");e.forEach(function(e,t){var o=e.querySelector(".post-loop-inner");null!=o&&setTimeout(function(){$(o).isotope("reloadItems").isotope()},300)});let t=document.querySelectorAll(".tpgb-carousel");t.forEach(function(e,t){slideStore.get(e).refresh()});var o=document.querySelectorAll(".tpgb-metro");o&&null!=o&&tpgb_metro_layout("")}allCount&&allCount.forEach(e=>{e=JSON.parse(e.dataset.countdata);e&&e.type&&"normal"===e.type?(e.style&&"style-1"===e.style&&WidgetCountDownHandler(e.blockId),e.style&&"style-2"===e.style&&styleFlipdown(e.blockId),e.style&&"style-3"===e.style&&styleProgressbar(e.blockId)):e&&e.type&&"scarcity"===e.type?e.style&&"style-1"===e.style?tpgb_scarcity_1(e.blockId):e.style&&"style-2"===e.style?tpgb_scarcity_2(e.blockId):e.style&&"style-3"===e.style&&tpgb_scarcity_3(e.blockId):e&&e.type&&"numbers"===e.type&&tpgb_fakenumber_countdown(e.blockId)});